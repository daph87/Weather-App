(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{101:function(e,t,n){},103:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getCurrentWeather",(function(){return E})),n.d(r,"setCity",(function(){return F})),n.d(r,"closeModal",(function(){return T})),n.d(r,"setUnitConversion",(function(){return g})),n.d(r,"getFiveDaysForecast",(function(){return R}));var c={};n.r(c),n.d(c,"addCityToFavorites",(function(){return I})),n.d(c,"deleteCityFromFavorites",(function(){return A}));var a,o=n(0),i=n(10),s=n.n(i),u=(n(76),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,126)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))}),l=n(22),d=n(7),j=n(5),O=(n(81),n(9)),b=n.n(O),f=n(17),h=n(6),v=n(8),p=function(e,t){return"C"!==e?"".concat(t.Temperature.Imperial.Value,"\xb0 ").concat(t.Temperature.Imperial.Unit):"".concat(t.Temperature.Metric.Value,"\xb0 ").concat(t.Temperature.Metric.Unit)},m=n(52),y=n.n(m).a.create({baseURL:"http://dataservice.accuweather.com/"});!function(e){e.CURRENT_WEATHER="CURRENT_WEATHER",e.CURRENT_WEATHER_ERROR="CURRENT_WEATHER_ERROR",e.SET_CITY="SET_CITY",e.SET_UNIT_CONVERSION="SET_UNIT_CONVERSION",e.FIVE_DAYS_FORECAST="FIVE_DAYS_FORECAST",e.FIVE_DAYS_FORECAST_ERROR="FIVE_DAYS_FORECAST_ERROR",e.CLOSE_MODAL="CLOSE_MODAL"}(a||(a={}));var x,C="CmA4vAXD306u0pdSGGwlchO5lC5VSjFs",E=function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.get("currentconditions/v1/".concat(e.Key,"?apikey=").concat(C)).then((function(e){r=e.data[0],n({type:a.CURRENT_WEATHER,payload:r})}),(function(e){n({type:a.CURRENT_WEATHER_ERROR,payload:e.message})}));case 2:return t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(t){t({type:a.SET_CITY,payload:e})}},T=function(){return function(e){e({type:a.CLOSE_MODAL})}},g=function(e){return function(t){t({type:a.SET_UNIT_CONVERSION,payload:e})}},R=function(e,t){return function(){var n=Object(f.a)(b.a.mark((function n(r){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.get("forecasts/v1/daily/5day/".concat(t.Key,"?apikey=").concat(C,"&metric=").concat("C"===e)).then((function(e){var t=e.data;r({type:a.FIVE_DAYS_FORECAST,payload:t})}),(function(e){r({type:a.FIVE_DAYS_FORECAST_ERROR,payload:e.message}),console.log(e.message,"error message")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};!function(e){e.ADD_FAVORITE_CITY="ADD_FAVORITE_CITY",e.DELETE_FAVORITE_CITY="DELETE_FAVORITE_CITY"}(x||(x={}));var _,I=function(e){return function(t){t({type:x.ADD_FAVORITE_CITY,payload:e})}},A=function(e){return function(t){t({type:x.DELETE_FAVORITE_CITY,payload:e})}},N=(n(101),function(e){return e=e<10?"0".concat(e):e,"https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(e,"-s.png")}),w=n(1),D=function(e){var t=e.cardKey,n=e.cityName,r=e.iconSource,c=e.alt,a=e.temperature,o=e.iconPhrase,i=e.onClick;return Object(w.jsxs)("div",{className:"weatherCard",onClick:i,children:[Object(w.jsx)("p",{className:"cityName",children:n}),Object(w.jsx)("div",{className:"icon",children:Object(w.jsx)("img",{src:N(r),alt:c})}),Object(w.jsx)("p",{className:"currentTemperature",children:a}),Object(w.jsx)("p",{className:"iconPhrase",children:o})]},t)},S=n.p+"static/media/loader.a1a99674.gif",W=(n(103),function(){return Object(w.jsx)("div",{id:"loaderContainer",children:Object(w.jsx)("img",{src:S,alt:"loader"})})}),M=function(e){var t=e.city,n=Object(o.useState)(void 0),c=Object(h.a)(n,2),a=c[0],i=c[1],s=Object(d.g)(),u=Object(j.c)((function(e){return e.weatherInfo.unit})),l=Object(j.b)(),O=Object(v.bindActionCreators)(r,l),m=O.getCurrentWeather,y=O.setCity;Object(o.useEffect)((function(){var e=function(){var e=Object(f.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var x=function(){y(t),s.push("/home")};return Object(w.jsx)("div",{children:a?Object(w.jsx)(D,{onClick:x,iconPhrase:a.WeatherText,iconSource:a.WeatherIcon,className:"currentWeatherCard",cardKey:"currentWeather".concat(t.Key),cityName:t.LocalizedName,temperature:p(u,a)}):"No errors"===a?Object(w.jsx)(W,{}):void 0},"favWeatherContainer".concat(t.Key))},k=function(){var e=Object(j.c)((function(e){return e.favoritesCitiesInfo.favoritesCities}));return Object(w.jsx)("div",{className:"favorites",children:e.map((function(e){return Object(w.jsx)(M,{city:e})}))})},V=n(33),L=n(29),Y=n(32),U=n(54),K=Object(V.b)(_||(_=Object(U.a)(["\n  body {\n    background: ",";\n    color: ",";\n    font-family: Tahoma, Helvetica, Arial, Roboto, sans-serif;\n    transition: all 0.50s linear;\n  }\n  .form-outline .form-control~.form-label{\n    color:","\n  }\n  .modal-header, .modal-body{\n    color:black!important\n  }\n  .form-outline .form-control{\n    color:","\n  }"])),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.color}),(function(e){return e.theme.color})),H={body:"#FFF",text:"#363537",toggleBorder:"#FFF",background:"#363537",color:"rgba(0,0,0,.6)"},z={body:"#363537",text:"#FAFAFA",toggleBorder:"#6B8096",background:"#999",color:"#FAFAFA"},B=(n(107),function(){var e=Object(o.useState)("light"),t=Object(h.a)(e,2),n=t[0],c=t[1],a=Object(j.b)(),i=Object(v.bindActionCreators)(r,a).setUnitConversion,s=Object(j.c)((function(e){return e.weatherInfo.unit}));return Object(w.jsx)(V.a,{theme:"light"===n?H:z,children:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(K,{}),Object(w.jsxs)("div",{className:"NavBar",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{onClick:function(){c("light"===n?"dark":"light")},children:Object(w.jsx)(Y.a,{icon:"light"===n?L.b:L.c})}),Object(w.jsx)("div",{className:"switchUnit",onClick:function(){i("C"===s?"F":"C")},children:"C"===s?Object(w.jsx)("p",{children:"C\xb0 to F\xb0"}):Object(w.jsx)("p",{children:"F\xb0 to C\xb0"})})]}),Object(w.jsx)("div",{className:"title",children:"The Weather Channel"}),Object(w.jsxs)("div",{className:"links",children:[Object(w.jsx)(l.b,{exact:!0,to:"/",children:"Home"}),Object(w.jsx)(l.b,{to:"/favorites",children:"Favorites"})]})]})]})})}),P=n(58),q=n.n(P),G=n(66),J=function(){var e=Object(f.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("locations/v1/cities/autocomplete?apikey=".concat(C,"&q=").concat(t));case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:return e.abrupt("return",null===(n=r)||void 0===n?void 0:n.data);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),X=n(124),Z=n(125),$=function(e){var t=e.show,n=e.message,r=e.closeModal;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(X.a,{show:t,onHide:r,children:[Object(w.jsx)(X.a.Header,{closeButton:!0,children:Object(w.jsx)(X.a.Title,{children:"Error"})}),Object(w.jsx)(X.a.Body,{children:n}),Object(w.jsx)(X.a.Footer,{children:Object(w.jsx)(Z.a,{variant:"secondary",onClick:r,children:"Ok"})})]})})},Q=function(){var e=Object(j.b)(),t=Object(v.bindActionCreators)(r,e).setCity,n=Object(o.useState)(""),c=Object(h.a)(n,2),a=c[0],i=c[1],s=Object(o.useState)(void 0),u=Object(h.a)(s,2),l=u[0],d=u[1],O=Object(o.useState)(!0),p=Object(h.a)(O,2),m=p[0],y=p[1],x=Object(o.useState)(!1),C=Object(h.a)(x,2),E=C[0],F=C[1],T=Object(o.useState)(""),g=Object(h.a)(T,2),R=g[0],_=g[1],I=Object(o.useRef)(q()(function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return y(!1),e.abrupt("return",!1);case 3:return e.next=5,J(t);case 5:(n=e.sent)?(d(n),y(!0),F(!1)):(F(!0),_("We couldn't complete your search, please try again later"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),500)).current;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)($,{message:R,show:E,closeModal:function(){return F(!1)}}),Object(w.jsxs)("form",{id:"locationSearch",children:[Object(w.jsx)(G.a,{onChange:function(e){var t=e.target;i(t.value);/^[A-Za-z]*$/.test(t.value)?I(t.value):(_("The search input can only contain english letters"),F(!0))},value:a,type:"text",label:"Search city"}),Object(w.jsx)("div",{children:!(!m||!l)&&l.map((function(e){var n;return Object(w.jsxs)("div",{className:"location".concat(e),onClick:function(){return function(e){y(!1),t(e)}(e)},children:[e.LocalizedName,", ",null===(n=e.Country)||void 0===n?void 0:n.LocalizedName]},e.Key)}))})]})]})},ee=(n(108),function(e){var t=e.city,n=Object(j.b)(),r=Object(v.bindActionCreators)(c,n),a=r.addCityToFavorites,o=r.deleteCityFromFavorites,i=Object(j.c)((function(e){return e.favoritesCitiesInfo.favoritesCities})).find((function(e){return e.Key===t.Key})),s=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i?o(t.Key):a(t);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{id:"favoriteIcon",children:Object(w.jsx)(Y.a,{onClick:s,icon:L.a,size:"3x",color:i?"#d7d705":"#a09da2"})})}),te=n(40),ne=n.n(te),re=(n(110),function(e){var t=e.dailyForecast,n=e.unit,r=t.Temperature.Maximum.Value,c=t.Temperature.Minimum.Value;return Object(w.jsxs)("div",{className:"dailyForecastContainer",children:[Object(w.jsxs)("div",{className:"dayAndDateContainer",children:[Object(w.jsx)("p",{className:"day",children:ne()(t.Date).format("dddd")}),Object(w.jsx)("p",{className:"date",children:ne()(t.Date).format("MMM Do")})]}),Object(w.jsxs)("p",{className:"temperature",children:[c," ",n,"\xb0 - ",r," ",n,"\xb0"]}),Object(w.jsx)("div",{className:"icon",children:Object(w.jsx)("img",{src:N(t.Day.Icon),alt:t.Day.IconPhrase})}),Object(w.jsx)("p",{className:"description",children:t.Day.IconPhrase})]})}),ce=(n(111),function(e){var t=e.unit,n=Object(j.c)((function(e){return e.weatherInfo.fiveDaysForecast}));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h1",{children:null===n||void 0===n?void 0:n.Headline.Text}),Object(w.jsx)("div",{id:"fiveDaysForecastBox",children:null===n||void 0===n?void 0:n.DailyForecasts.map((function(e){return Object(w.jsx)(re,{unit:t,dailyForecast:e},e.EpochDate)}))})]})}),ae=(n(112),function(){var e=Object(j.b)(),t=Object(v.bindActionCreators)(r,e),n=t.getCurrentWeather,c=t.getFiveDaysForecast,a=t.setCity,i=t.closeModal,s=Object(j.c)((function(e){return e.weatherInfo.city})),u=Object(j.c)((function(e){return e.weatherInfo.currentWeather})),l=Object(j.c)((function(e){return e.weatherInfo.showModal})),d=Object(j.c)((function(e){return e.weatherInfo.modalMessageCurrent})),O=Object(j.c)((function(e){return e.weatherInfo.currentWeatherError})),h=Object(j.c)((function(e){return e.weatherInfo.fiveDaysForecastError})),m=Object(j.c)((function(e){return e.weatherInfo.modalMessageForecast})),x=Object(j.c)((function(e){return e.weatherInfo.unit}));Object(o.useRef)().current=s,Object(o.useEffect)((function(){s?(n(s),c(x,s)):function(e){navigator.permissions.query({name:"geolocation"}).then((function(t){"prompt"===t.state||"granted"===t.state?navigator.geolocation.getCurrentPosition(function(){var t=Object(f.a)(b.a.mark((function t(n){var r,c,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.coords,c=r.latitude,a=r.longitude,t.next=3,y.get("locations/v1/cities/geoposition/search?apikey=".concat(C,"&q=").concat(c,",").concat(a)).then((function(t){var n=t.data;e({Key:n.Key,LocalizedName:n.LocalizedName})})).catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):"denied"===t.state&&e({Key:"215854",LocalizedName:"Tel Aviv"})}))}(a)}),[s,x]);return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{id:"homeContainer",children:[Object(w.jsx)(Q,{}),Object(w.jsx)("div",{children:function(){if(u&&s)return Object(w.jsxs)("div",{id:"currentWeatherContainer",children:[Object(w.jsx)(D,{iconPhrase:u.WeatherText,iconSource:u.WeatherIcon,className:"currentWeatherCard",cardKey:"currentWeather".concat(s.Key),cityName:s.LocalizedName,temperature:p(x,u)}),Object(w.jsx)(ee,{city:s})]});if(l){var e="Your request hasn't been processed for the following reason(s): \n      Current Weather - ".concat(m,", Forecast - ").concat(d);return Object(w.jsx)($,{message:e,show:l,closeModal:i})}return!O&&s?Object(w.jsx)(W,{}):void 0}()}),Object(w.jsx)("div",{id:"fiveDaysForecastContainer",children:s?Object(w.jsx)(ce,{unit:x}):!h&&s?Object(w.jsx)(W,{}):void 0})]})})}),oe=function(){return Object(w.jsx)("div",{className:"layout",children:Object(w.jsxs)(l.a,{children:[Object(w.jsx)("header",{children:Object(w.jsx)(B,{})}),Object(w.jsx)("main",{children:Object(w.jsxs)(d.d,{children:[Object(w.jsx)(d.b,{exact:!0,path:"/favorites",component:k}),Object(w.jsx)(d.b,{exact:!0,path:"/home",component:ae}),Object(w.jsx)(d.a,{exact:!0,from:"/",to:"home"})]})})]})})},ie=n(41),se=n(67),ue=n(65),le=n(64),de=n(34),je=n(2),Oe={favoritesCities:[]},be={showModal:!1,modalMessageCurrent:"",modalMessageForecast:"",currentWeather:void 0,currentWeatherError:void 0,city:void 0,unit:"Celsius",fiveDaysForecastError:void 0,fiveDaysForecast:void 0},fe=Object(v.combineReducers)({weatherInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.CURRENT_WEATHER:return Object(je.a)(Object(je.a)({},e),{},{currentWeather:t.payload,currentWeatherError:void 0,showModal:!1,modalMessageCurrent:""});case a.CURRENT_WEATHER_ERROR:return Object(je.a)(Object(je.a)({},e),{},{currentWeatherError:t.payload,currentWeather:void 0,showModal:!0,modalMessageCurrent:t.payload});case a.SET_CITY:return Object(je.a)(Object(je.a)({},e),{},{city:t.payload});case a.SET_UNIT_CONVERSION:return Object(je.a)(Object(je.a)({},e),{},{unit:t.payload});case a.CLOSE_MODAL:return Object(je.a)(Object(je.a)({},e),{},{showModal:!1});case a.FIVE_DAYS_FORECAST:return Object(je.a)(Object(je.a)({},e),{},{fiveDaysForecast:t.payload,fiveDaysForecastError:void 0,showModal:!1,modalMessageForecast:""});case a.FIVE_DAYS_FORECAST_ERROR:return Object(je.a)(Object(je.a)({},e),{},{fiveDaysForecast:void 0,fiveDaysForecastError:t.payload,showModal:!0,modalMessageForecast:t.payload});default:return e}},favoritesCitiesInfo:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case x.ADD_FAVORITE_CITY:return Object(je.a)(Object(je.a)({},t),{},{favoritesCities:[].concat(Object(de.a)(t.favoritesCities),[n.payload])});case x.DELETE_FAVORITE_CITY:return Object(je.a)(Object(je.a)({},t),{},{favoritesCities:null===(e=t.favoritesCities)||void 0===e?void 0:e.filter((function(e){return e.Key!==n.payload}))});default:return t}}}),he=fe,ve={key:"root",storage:se.a},pe=Object(ie.a)(ve,he),me=Object(v.createStore)(pe,Object(v.compose)(Object(le.composeWithDevTools)(Object(v.applyMiddleware)(ue.a)))),ye={store:me,persistor:Object(ie.b)(me)};n(117);s.a.render(Object(w.jsx)(j.a,{store:ye.store,children:Object(w.jsx)(oe,{})}),document.getElementById("root")),u()},76:function(e,t,n){},81:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.35a2fcd5.chunk.js.map